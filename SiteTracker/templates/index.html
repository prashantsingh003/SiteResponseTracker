<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Tivo is a HTML landing page template built with Bootstrap to help you crate engaging presentations for SaaS apps and convert visitors into users.">
    <meta name="author" content="Inovatik">

    <!-- OG Meta Tags to improve the way the post looks when you share the page on LinkedIn, Facebook, Google+ -->
    <meta property="og:site_name" content="" /> <!-- website name -->
    <meta property="og:site" content="" /> <!-- website link -->
    <meta property="og:title" content="" /> <!-- title shown in the actual shared post -->
    <meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
    <meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
    <meta property="og:url" content="" /> <!-- where do you want your post to link to -->
    <meta property="og:type" content="article" />

    <!-- Website Title -->
    <title>Site Tracker - App HTML Page Template</title>

    <!-- Styles -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap&subset=latin-ext"
        rel="stylesheet">
    <link href="{{url_for('static',filename='css/bootstrap.css')}}" rel="stylesheet">
    <link href="{{url_for('static',filename='css/fontawesome-all.css')}}" rel="stylesheet">
    <link href="{{url_for('static',filename='css/swiper.css')}}" rel="stylesheet">
    <link href="{{url_for('static',filename='css/magnific-popup.css')}}" rel="stylesheet">
    <link href="{{url_for('static',filename='css/styles.css')}}" rel="stylesheet">

    <!-- Favicon  -->
    <link rel="icon" href="{{url_for('static',filename='images/favicon.png')}}">
    <style>
        a{
            text-decoration: none;
        }
    </style>
</head>

<body data-spy="scroll" data-target=".fixed-top">

    <!-- Preloader -->
    <div class="spinner-wrapper">
        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>
    <!-- end of preloader -->


    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
        <div class="container">

            <!-- Text Logo - Use this if you don't have a graphic logo -->
            <!-- <a class="navbar-brand logo-text page-scroll" href="index.html">Tivo</a> -->

            <!-- Image Logo -->
            <a class="navbar-brand logo-image" href="{{url_for('home')}}"><img
                    src="{{url_for('static',filename='images/logo.bmp')}}" alt="alternative" style="width: 100%;height:100%;"></a>

            <!-- Mobile Menu Toggle Button -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
                aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-awesome fas fa-bars"></span>
                <span class="navbar-toggler-awesome fas fa-times"></span>
            </button>
            <!-- end of mobile menu toggle button -->

            <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link page-scroll" href="{{url_for('home')}}">HOME <span
                                class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link page-scroll remove-when-anonymous" href="{{url_for('website.fetch_websites')}}">DASHBOARD</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link page-scroll" href="#features">FEATURES</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link page-scroll" href="#details">DETAILS</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link page-scroll" href="{{url_for("pricing")}}">PRICING</a>
                    </li>

                    <!-- Dropdown Menu -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle page-scroll" href="#video" id="navbarDropdown" role="button"
                            aria-haspopup="true" aria-expanded="false">MORE</a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="{{url_for('article_details')}}"><span class="item-text">ARTICLE
                                    DETAILS</span></a>
                            <div class="dropdown-items-divide-hr"></div>
                            <a class="dropdown-item" href="{{url_for("terms_conditions")}}"><span class="item-text">TERMS
                                    CONDITIONS</span></a>
                            <div class="dropdown-items-divide-hr"></div>
                            <a class="dropdown-item" href="{{url_for("policy")}}"><span class="item-text">PRIVACY
                                    POLICY</span></a>
                        </div>
                    </li>
                    <!-- end of dropdown menu -->

                </ul>
                <span class="nav-item">
                        <a class="btn-outline-sm" id="loginlink" href="{{url_for('log_in')}}">LOG IN</a>
                </span>
            </div>
        </div> <!-- end of container -->
    </nav> <!-- end of navbar -->
    <!-- end of navigation -->

    {% block index %}
    {% endblock %}

    {% with messages=get_flashed_messages(with_categories=true) %}
    <!-- Breadcrumbs -->
       <div class="ex-basic-1">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumbs">
                        
                        {% if messages %}
                        {% for category,message in messages %}
                        <div class="alert alert-{{category}}">
                            {{message}}
                        </div>
                        {% endfor %}
                        {% endif %}
                        
                    </div> <!-- end of breadcrumbs -->
                </div> <!-- end of col -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </div> <!-- end of ex-basic-1 -->
    <!-- end of breadcrumbs -->
    {% endwith %}

    <!-- Scripts -->
    <script src="{{url_for('static',filename='js/jquery.min.js')}}"></script>
    <!-- jQuery for Bootstrap's JavaScript plugins -->
    <script src="{{url_for('static',filename='js/popper.min.js')}}"></script>
    <!-- Popper tooltip library for Bootstrap -->
    <script src="{{url_for('static',filename='js/bootstrap.min.js')}}"></script> <!-- Bootstrap framework -->
    <script src="{{url_for('static',filename='js/jquery.easing.min.js')}}"></script>
    <!-- jQuery Easing for smooth scrolling between anchors -->
    <script src="{{url_for('static',filename='js/swiper.min.js')}}"></script> <!-- Swiper for image and text sliders -->
    <!-- Magnific Popup for lightboxes -->
    <script src="{{url_for('static',filename='js/jquery.magnific-popup.js')}}"></script>
    <!-- Validator.js - Bootstrap plugin that validates forms -->
    <script src="{{url_for('static',filename='js/validator.min.js')}}"></script>
    <!-- Custom scripts -->
    <script src="{{url_for('static',filename='js/scripts.js')}}"></script> 
    
    <script>
        var ele = document.getElementById('loginlink')
        var is_authenticated
        window.onload = () => {

            let cookie_str = document.cookie
            let arr = cookie_str.split(';')
            let cookie_dict = {}
            for (let i = 0; i < arr.length; i++) {
                arr[i] = (arr[i].split('=')).map(x => x.trim())
                cookie_dict[arr[i][0]] = arr[i][1]
            }

            is_authenticated = cookie_dict['access_token_cookie'] ? cookie_dict['access_token_cookie'].length > 100 ? true : false : false;

            if (is_authenticated === true) {
                ele.innerHTML = 'LOG OUT'
                ele.setAttribute('href', '/home');
                var rem_elements = document.getElementsByClassName('remove-when-authenticated')
                while (rem_elements.length > 0) {
                    rem_elements[0].parentNode.removeChild(rem_elements[0]);
                }
            }
            if (is_authenticated === false) {
                ele.setAttribute('href', '/log-in');
                ele.innerHTML = 'LOG IN'
                var rem_elements = document.getElementsByClassName('remove-when-anonymous')
                while (rem_elements.length > 0) {
                    rem_elements[0].parentNode.removeChild(rem_elements[0]);
                }
            }
        }
        ele.addEventListener('click', function () {
            if (ele.innerHTML === 'LOG OUT') {
                document.cookie = "access_token_cookie=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                console.log('cookie deleted')
            }
        })
    </script>
</body>

</html>